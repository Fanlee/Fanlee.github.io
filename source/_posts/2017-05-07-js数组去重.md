---
title: JS的数组去重
date: 2017-05-7 21:13:48
categories: 学习笔记
tags: javascript
keywords: javascript
comments: true
---
### 判断浏览器是否支持indexOf方法
```javascript
//判断是否支持indexOf方法
if(!Array.prototype.indexOf){
  Array.prototype.indexOf = function (item){
    var result = -1;
    //数组为空的时候返回-1
    if (this.length == 0) {
      return result;
    };
    for (var i = 0; i < this.length; i++) {
      if (this[i] === item) {
        //当当前项的值与参数值相等的时候，结束循环
        result = i;
        break;
      }
    };
    return result;
  };
}
```
### 遍历数组法：新建一新数组，遍历数组，值不在新数组中就加入新数组
```javascript
function unique(array){
    //新建数组
	var newArr = [];
	for(var i = 0; i < arr.length; i++){
	  //值不在新数组中就添加到新数组
	  if(newArr.indexOf(array[i]) == -1){
		newArr.push(array[i]);
	  }
	};
	return newArr
	}
```
### 对象键值法：该方法执行速度比其他任何方法都快，就是占用内存大一些。新建一JS对象和数组，遍历传入数组时，判断值是否为JS对象的值，不是的话给对象新增该键并放入新数组。注意点，判断是否为JS对象键时，会自动对传入的键执行"toString()",不同的键可能会被误认为一样。
```javascript
function unique(array){
    var obj = {},
          newArr = [],
          len = array.length,
          val,
          type;
    for (var i = 0; i < len; i++) {
      val = array[i];
      //获取值的数据类型
      type = typeof val;
      //判断值是否存在
      if (!obj[val]) {
        //把type以数组的形式存入便于用indexOf对比
        obj[val] = [type];
        newArr.push(val);
      } else if(obj[val].indexOf(type) < 0) {  //值存在的情况下判断是否是相同的数据类型
        obj[val].push(type);
        newArr.push(val);
      }
    }
    return newArr;
  }
  ```
### 数组下标判断法：当前数组的第i项在当前数组中第一次出现的位置不是i，那么表示第i项是重复的。
```javascript
function unique(array){
    var newArr = [array[0]];
    for (var i = 1; i < array.length; i++) {
      //判断第i项出现位置下标
      if (array.indexOf(array[i]) == i) {
        newArr.push(array[i])
      };
    }
    return newArr;
 }
 ```
### 排序后相邻去除法：给传入数组排序，排序后相同值相邻，然后遍历时新数组只加入不与前一值重复的值。
```javascript
function unique(array){
    //先排序
    array.sort();
    var newArr = [array[0]];
    for (var i =1; i < array.length; i++) {
      //newArr最后一项就是array[i]的前一项
      if(array[i]  !== newArr[newArr.length - 1]){
        newArr.push(array[i]);
      };
    };
    return newArr;
 }
 ```
### 获取没重复的最右一值放入新数组。检测到有重复值时终止当前循环同时进入顶层循环的下一轮判断
```javascript
function unique(array){
    var r = [];
    for(var i = 0, len = array.length; i < len; i++){
      for(var j = i + 1; j < len; j++){
        if(array[i] === array[j]){
          //当两个值相同的时候,i在内循环自增1，相当于跳出本次循环，执行下一次，当前值就不能添加到新数组
          j = ++i;
        };
      }
      r.push(array[i]);
    };

    return r;
  }
  ```



